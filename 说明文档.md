<h2 id="aJY6N">1.系统概述</h2>

本播客应用是一个基于React Native开发的跨平台移动应用，提供播客发现、播放、评论、个人中心管理等功能。应用支持深色/浅色主题切换，本地数据存储，并可通过配置切换至后端API模式。

<h2 id="rQS2H">2. 系统架构</h2>
<h3 id="wjgXL">2.1 整体架构</h3>

应用采用前端驱动的架构设计，主要包含以下几个核心部分：

+ **UI层**：负责用户界面展示，包括各个屏幕组件和可复用组件
+ **状态管理层**：使用React Context API管理全局状态（主题、评论、订阅等）
+ **数据服务层**：提供本地存储和后端API访问能力
+ **导航层**：管理应用内页面跳转和路由

<h3 id="DGf5M">2.2 核心模块</h3>

1. **用户界面模块**
   - 发现页（DiscoveryScreen）：播客浏览和搜索
   - 个人中心页（ProfileScreen）：用户信息管理
   - 评论相关（CommentsScreen、CommentsSection）：评论展示和交互
   - 播放相关：播客播放功能（PlayerScreen）
2. **数据服务模块**（src/services/api.js）
   - 提供统一的请求接口，支持本地存储和后端API两种模式
   - 本地存储使用AsyncStorage管理评论和播客数据
   - 可通过`useBackend`配置项切换数据来源
3. **导航模块**（src/navigation/MainTab.js）
   - 使用React Navigation管理页面导航
   - 实现个人中心相关页面的堆栈导航
4. **状态管理模块**
   - 主题管理：控制应用的深色/浅色模式
   - 评论管理：处理评论的增删改查
   - 订阅管理：管理用户订阅的播客

<h2 id="SQz2u">3. 使用指南</h2>
<h3 id="AlCH5">3.1 主要功能使用</h3>
<h4 id="iv0Lu">3.1.1 个人中心管理</h4>

+ **编辑个人资料**：点击个人头像或编辑按钮，在弹出的编辑模态框中修改用户名、个人简介等信息
+ **主题切换**：通过主题设置选择浅色模式、深色模式或跟随系统
+ **查看收听历史**：在最近收听区域点击"查看全部"可查看完整收听记录
+ **管理通知**：查看系统通知和订阅通知，可标记已读或删除通知

<h4 id="IwRgq">3.1.2 播客发现与互动</h4>

+ **浏览播客**：在发现页浏览精选播客、热门播客
+ **搜索播客**：使用顶部搜索框搜索感兴趣的播客内容
+ **筛选播客**：通过分类筛选特定类型的播客
+ **播放播客**：点击播客项即可开始播放

<h4 id="pY7sn">3.1.3 评论功能</h4>

+ **查看评论**：在播客详情页查看其他用户的评论
+ **发表评论**：通过评论输入框提交自己的评论

<h3 id="isLXL">3.2 界面说明</h3>

+ **个人中心页**：展示用户信息、统计数据、最近收听记录和功能菜单
+ **发现页**：提供播客浏览、搜索和分类筛选功能
+ **评论页**：展示特定播客的所有评论并提供评论发布功能

<h2 id="H9ZHJ">4. 运行方式</h2>
<h3 id="KddQl">4.1 环境要求</h3>

+ Node.js <font style="color:rgb(51, 51, 51);">16.0+</font>
+ npm 或 yarn
+ Expo CLI (推荐)
+ 安卓/iOS模拟器或真实设备

<h3 id="js9W7">4.2 安装步骤</h3>

1. **<font style="color:rgb(0, 0, 0) !important;">安装 Expo CLI（全局工具）</font>**<font style="color:rgb(0, 0, 0);">首次使用 Expo 时，需要先全局安装 Expo 命令行工具（仅需安装一次）：</font>**<font style="color:rgba(0, 0, 0, 0.85);">bash</font>**

```plain
npm install -g expo-cli
# 或使用 yarn
yarn global add expo-cli
```

2. **<font style="color:rgb(0, 0, 0) !important;">克隆代码仓库</font>****<font style="color:rgba(0, 0, 0, 0.85);">bash</font>**

```bash
git clone https://github.com/qingliul/podcast-app
cd podcast-app  # 进入项目目录（替换<项目目录>为实际文件夹名，通常是仓库名podcast-app）
```

3. **<font style="color:rgb(0, 0, 0) !important;">安装项目依赖</font>****<font style="color:rgba(0, 0, 0, 0.85);">bash</font>**



```bash
npm install
# 或使用 yarn
yarn install
```

4. **安装 Web 支持插件**

```c
#在项目目录下执行以下命令，安装 Expo Web 所需的依赖：
expo install react-dom @expo/webpack-config
#如果使用 npm 或 yarn 安装（效果相同）
npm install react-dom @expo/webpack-config --save
#或
yarn add react-dom @expo/webpack-config
```

5. **<font style="color:rgb(0, 0, 0) !important;">启动应用</font>****<font style="color:rgba(0, 0, 0, 0.85);">bash</font>**

```bash
expo start  # 推荐使用Expo命令启动，会自动打开开发工具界面
# 或使用npm脚本（需项目package.json中配置了start脚本）
npm start
```

    - 在浏览器中打开  按“w"键
    - 使用Expo Go应用扫描二维码在移动设备上运行
    - 或选择在模拟器中运行（需要安装相应的模拟器） Android Studio

<h2 id="QcwCW">5. 依赖说明</h2>
<h3 id="i15vU">5.1 核心依赖</h3>

+ **react**: 17.0.2 - React核心库
+ **react-native**: 0.68.2 - React Native框架
+ **@react-navigation/native**: 6.x - 导航库
+ **@react-navigation/stack**: 6.x - 堆栈导航组件
+ **expo**: ~45.0.0 - Expo开发工具
+ **@expo/vector-icons**: ^13.0.0 - 图标库
+ **@react-native-async-storage/async-storage**: 1.17.7 - 本地存储

<h3 id="qxkbL">5.2 开发依赖</h3>

+ **@babel/core**: ^7.12.9 - Babel编译器
+ **jest**: ^26.6.3 - 测试框架
+ **react-test-renderer**: 17.0.2 - React测试工具

<h2 id="xHw65">6. 配置说明</h2>

应用的核心配置位于`src/services/api.js`中的`CONFIG`对象：

```javascript
const CONFIG = {
  useBackend: false, // 切换开关 - 改为true即可接入后端
  backendUrl: 'http://localhost:3000/api', // 后端API地址
  storageKeys: {
    COMMENTS: '@podcast_comments', // 评论存储键名
    EPISODES: '@podcast_episodes', // 播客存储键名
  }
};
```

+ `useBackend`: 布尔值，设置为`true`时使用后端API，`false`时使用本地存储
+ `backendUrl`: 后端API的基础地址，当`useBackend`为`true`时生效

<h2 id="fdFZG">7. 数据存储说明</h2>

在本地模式下，应用使用AsyncStorage存储以下数据：

+ 评论数据：存储在`@podcast_comments`键下，以JSON格式保存
+ 播客数据：存储在`@podcast_episodes`键下，以JSON格式保存

数据结构设计确保了数据的完整性和查询效率，所有数据操作都通过`ApiService`提供的接口进行，保证了数据访问的一致性。

<h2 id="XKeKm">8. 扩展与定制</h2>

+ **添加新主题**：可在主题配置中添加新的主题选项，并在`themeOptions`中注册
+ **扩展API功能**：在`ApiService`中添加新的请求处理方法以支持更多API端点
+ **新增屏幕**：在导航配置中添加新的屏幕，并实现相应的组件



<h2 id="EAGVn">9.展示</h2>
<h3 id="QO6co">模拟器版：</h3>
<h4 id="bzp7x">发现界面：</h4>

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109011943-7e54aa0f-c229-4eac-b763-4977417edab4.png)

搜索功能：

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108513906-e8436de2-e5ef-47ae-b51b-de176d02056d.png)

播放功能：

迷你播放器：

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108544653-aa617f68-ee55-4b50-9494-f93baa9692cc.png)

点击迷你播放器 进入播放器页面：

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108601002-fcb4c97c-b881-43fb-a116-b1b35c182c8a.png)

可以收藏，评论，订阅，查看播放列表

点击 主页博客卡片的加号 ，将节目加入播放列表



![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108848327-2c356c76-2054-453f-aac0-c00e6579a410.png)

点击 评论  可以进入评论界面  ，进行评论

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108930776-9002c48e-ab44-4489-b9e2-047e8f33eb57.png)

<h4 id="KWiGe">b.订阅界面</h4>

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108676794-609f72b0-1703-471b-b5c9-5b07643cff7f.png)

<h4 id="KNO6P">c.收藏界面：</h4>

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108700294-baeaba5e-9ebb-4580-9662-16e8dee7a1e2.png)

<h4 id="VBVSf">d.我的界面：</h4>

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760108716058-4248a388-56bb-4afd-8a32-b3504c332e15.png)

可以修改个人资料，查看最近收听，查看或删除未读消息，主题设置

<h3 id="FIUc9">网页版：</h3>

发现

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109245599-f28c5749-fc15-4b52-a7c5-6d1920eb8a9d.png)

订阅

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109258701-a8607ce2-1717-4c31-9330-ef93c4d8fcb1.png)

收藏

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109273263-2a5dc4a5-923d-48ee-b335-8c05b917adcd.png)

我的

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109346094-85b88189-d5c8-4d8c-8890-3d2090c185de.png)

播放器：

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109395281-c804cd1d-a073-4803-96ab-d817be5b077d.png)

评论：

![](https://cdn.nlark.com/yuque/0/2025/png/43070168/1760109426477-1b80c464-4cca-4ab0-8329-80c4e2982c71.png)

